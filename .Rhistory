sums[1,]$SUM
base_val_ba<-sums_ba[1,]$SUM
base_val_la<-sums_la[1,]$SUM
sums_ba$rel_change <- sums_ba$SUM / base_val_ba
sums_la$rel_change <- sums_la$SUM / base_val_la
# Add the city name
sums_ba<-motor_vehicle_ba[, list(SUM=sum(Emissions)), by=year]
sums_la<-motor_vehicle_la[, list(SUM=sum(Emissions)), by=year]
# Add a column for the relative change
base_val_ba<-sums_ba[1,]$SUM
base_val_la<-sums_la[1,]$SUM
sums_ba$rel_change <- sums_ba$SUM / base_val_ba
sums_la$rel_change <- sums_la$SUM / base_val_la
# Add the city name
sums_ba$city="Baltimore"
sums_la$city="L.A."
# Join the Data
sums<-rbind(sums_ba,sums_la)
sums
with(sums, plot(year, SUM, main="Abs", type ="n"))
with(subset(airquality, city == "L.A."), points(year,SUM, col ="blue"))
with(subset(airquality, city == "Baltimore"), points(year,SUMe, col ="red"))
sums
str(sums)
with(sums, plot(year, SUM, main="Abs", type ="n"))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue"))
with(subset(sums, city == "Baltimore"), points(year,SUMe, col ="red"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19))
legend("topright", pch = 1, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, SUM, main="Abs", type ="n"))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19))
legend("topright", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, SUM, main="Abs", type ="n"))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="rel", type ="n"))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19))
with(sums, plot(year, rel_change, main="rel", type ="n"))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, alpha=0.5))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,alpha=0.5))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
?par
with(sums, plot(year, SUM, main="Abs", type ="n"))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="l"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,Type="l"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="l"))
par
?par
?plo
?plot
with(sums, plot(year, SUM, main="Abs", type ="n"))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="rel", type ="n"))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, SUM, main="Abs", type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
with(sums, plot(year, SUM, main="Absolute change for Baltimore and L.A.", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, SUM, main="Absolute change of emissions for Baltimore and L.A.", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="Relative change of emissions for Baltimore and L.A.", ylab="relative change",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
par(mfrow=c(1,2))
with(sums, plot(year, SUM, main="Absolute change of emissions for Baltimore and L.A.", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="Relative change of emissions for Baltimore and L.A.", ylab="relative change",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="Relative change ", ylab="relative change",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
mtext("Change of emissions for Baltimore and L.A.")
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE)
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE)
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="Relative change ", ylab="relative change",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE)
par(mfrow=c(1,2), mar=c(4,4,2,1), oma=c(0,0,2,0))
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="Relative change ", ylab="relative change",type ="n",xaxp= c(1999,2008,3)))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE)
?mtext
?par
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3),font=1))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3),font.main=1))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
par(mfrow=c(1,2), mar=c(4,4,2,1), oma=c(0,0,2,0))
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3),font.main=1))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="Relative change ", ylab="relative change",type ="n",xaxp= c(1999,2008,3), font.main=1))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE)
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE, font=2)
par(mfrow=c(1,2), mar=c(4,4,2,1), oma=c(0,0,2,0))
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3),font.main=1))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(sums, plot(year, rel_change, main="Relative change ", ylab="relative change",type ="n",xaxp= c(1999,2008,3), font.main=1))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE, font=2)
par(mfrow=c(1,2), mar=c(4,4,2,1), oma=c(0,0,2,0))
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3),font.main=1))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="Relative change ", ylab="relative change",type ="n",xaxp= c(1999,2008,3), font.main=1))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE, font=2)
# Convert to a table
neit<-data.table(NEI)
scct<-data.table(SCC)
## Quetion 5: Emission change motor vehicle sources in Baltimore city
scct$Short.Name = tolower(scct$Short.Name)
#First select all codes representing motor vehicles (which is the tricky part here)
# Selection is based on the NEI 2008 Technical support document, see http://www.epa.gov/ttn/chief/net/2008neiv3/2008_neiv3_tsd_draft.pdf
# Exceprt from chapter 4.6, page 112:
# SCCs starting with 22010 define the light duty gasoline vehicles including motorcycles,
# with the exception of SCCs starting with 220107, which define the heavy duty gasoline vehicles.
# SCCs starting with 22300 define the light duty diesel vehicles,
# with the exception of SCCs starting with 223007 that define the heavy duty diesel vehicles.
scct_motor<-data.table(scct[grepl("^22010|^22300", scct$SCC)])
# convert to character and filter the nei data for baltimore with these scc codes
scct_motor$SCC<-as.character(scct_motor$SCC)
# select data for Baltimore and L.A.
baltimore<-filter(neit, fips=="24510")
la<-filter(neit, fips=="06037")
# get all motor related data for both cities
motor_vehicle_ba<-filter( baltimore, SCC %in% scct_motor$SCC)
motor_vehicle_la<-filter( la, SCC %in% scct_motor$SCC)
# Sum up both
sums_ba<-motor_vehicle_ba[, list(SUM=sum(Emissions)), by=year]
sums_la<-motor_vehicle_la[, list(SUM=sum(Emissions)), by=year]
# Add the city name
sums_ba$city="Baltimore"
sums_la$city="L.A."
# Add a column for the relative change
base_val_ba<-sums_ba[1,]$SUM
base_val_la<-sums_la[1,]$SUM
sums_ba$rel_change <- sums_ba$SUM / base_val_ba
sums_la$rel_change <- sums_la$SUM / base_val_la
# Join the Data
sums<-rbind(sums_ba,sums_la)
png(file= "plot6.png",width=720)
par(mfrow=c(1,2), mar=c(4,4,2,1), oma=c(0,0,2,0))
with(sums, plot(year, SUM, main="Absolute change", ylab="Emissions of pm2.5 in tons",type ="n",xaxp= c(1999,2008,3),font.main=1))
with(subset(sums, city == "L.A."), points(year,SUM, col ="blue",pch=19,type="b"))
with(subset(sums, city == "Baltimore"), points(year,SUM, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
with(sums, plot(year, rel_change, main="Relative change ", ylab="relative change",type ="n",xaxp= c(1999,2008,3), font.main=1))
with(subset(sums, city == "L.A."), points(year,rel_change, col ="blue",pch=19, type="b"))
with(subset(sums, city == "Baltimore"), points(year,rel_change, col ="red",pch=19,type="b"))
legend("topleft", pch = 19, col=c("blue", "red"), legend=c("L.A.", "Baltimore"))
mtext("Change of emissions for Baltimore and L.A.", outer =TRUE, font=2)
dev.off()
?rm
?aggregate
library(data.table)
unzip("activity.zip", exdir= ".")
md <- read.csv("activity.csv")
md <-data.table(md)
setwd("~/git-repos/ReproducibleResearch/assignment1")
library(data.table)
unzip("activity.zip", exdir= ".")
md <- read.csv("activity.csv")
md<-md[!is.na(md$steps),]
sumsPerDay<-md[, list(sumPerDay=sum(steps)), by=date]
hist(sumsPerDay$sumPerDay)
md<-md[!is.na(md$steps),]
sumsPerDay<-md[, list(sumPerDay=sum(steps)), by=date]
library(data.table)
unzip("activity.zip", exdir= ".")
md <- read.csv("activity.csv")
md <-data.table(md)
md<-md[!is.na(md$steps),]
sumsPerDay<-md[, list(sumPerDay=sum(steps)), by=date]
hist(sumsPerDay$sumPerDay)
s<-summary(sumsPerDay$sumPerDay,digits=6)
s["Mean"]
s["Median"]
```
## What is the average daily activity pattern?
sumsPerInterval<-md[, list(sumPerInterval=sum(steps)), by=interval]
sumsPerInterval[order(sumsPerInterval$interval),]
with(sumsPerInterval,(plot(interval,sumPerInterval)))
md$interval/100
toInt(md$interval/100)
toInteger(md$interval/100)
Integer(md$interval/100)
as.integer((md$interval/100))
as.integer((md$interval%100))
md$interval%100
md$interval % 100
md$interval %% 100
as.integer((md$interval%100)) * 60 + md.interval %% 100
(as.integer((md$interval%100)) * 60) + (md.interval %% 100)
(as.integer((md$interval%100)) * 60) + (md$interval %% 100)
as.integer((md$interval%100)) * 60
as.integer((md$interval/100)) * 60
(as.integer((md$interval/100)) * 60) + (md$interval %% 100)
((as.integer((md$interval/100)) * 60) + (md$interval %% 100) ) /60
md$hour<-((as.integer((md$interval/100)) * 60) + (md$interval %% 100) ) /60
md$hour<-((as.integer((md$interval/100)) * 60) + (md$interval %% 100) ) /60
sumsPerInterval<-md[, list(sumPerInterval=sum(steps)), by=interval]
sumsPerInterval[order(sumsPerInterval$interval),]
with(sumsPerInterval,(plot(interval,sumPerInterval)))
sumsPerInterval<-md[, list(sumPerInterval=sum(steps)), by=hour]
sumsPerInterval[order(sumsPerInterval$interval),]
with(sumsPerInterval,(plot(interval,sumPerInterval)))
md$hour<-((as.integer((md$interval/100)) * 60) + (md$interval %% 100) ) /60
sumsPerInterval<-md[, list(sumPerInterval=sum(steps)), by=hour]
with(sumsPerInterval,(plot(hour,sumPerInterval)))
max(sumsPerInterval$sumPerInterval)
maxInterval<-sumsPerInterval[sumsPerInterval$sumPerInterval==max(sumsPerInterval$sumPerInterval)),]
maxInterval<-sumsPerInterval[sumsPerInterval$sumPerInterval==max(sumsPerInterval$sumPerInterval),]
maxInterval
sumsPerInterval2<-md[, list(sumPerInterval=sum(steps)), by=interval]
maxInterval<-sumsPerInterval2[sumsPerInterval2$sumPerInterval==max(sumsPerInterval2$sumPerInterval),]
maxInterval
sumsPerDay<-md[, list(sumPerDay=sum(steps)), by=date]
hist(sumsPerDay$sumPerDay)
s<-summary(sumsPerDay$sumPerDay,digits=6)
s["Mean"]
s["Median"]
hist(sumsPerDay$sumPerDay)
abline(h=12,lwd=2,lty=2)
hist(sumsPerDay$sumPerDay)
abline(v=s["Mean"],lwd=2,lty=2)
abline(v=s["Median"],lwd=2,lty=2)
abline(v=s["Mean"],lwd=1,lty=1,color=blue)
abline(v=s["Mean"],lwd=1,lty=1,color="blue"")
abline(v=s["Mean"],lwd=1,lty=1,color="blue")
abline(v=s["Mean"],lwd=1,lty=1,color=2)
abline(v=s["Mean"],lwd=1,lty=1,color=4)
abline(v=s["Median"],lwd=1,lty=2)
abline(v=s["Mean"],lwd=1,lty=1,col=4)
abline(v=s["Median"],lwd=1,lty=1)
abline(v=s["Mean"],lwd=1,lty=1,color=blue)
abline(v=s["Median"],lwd=1,color=red)
abline(v=s["Mean"],lwd=1,lty=1,col="blue")
abline(v=s["Median"],lwd=1,lty=2,col="red")
hist(sumsPerDay$sumPerDay)
abline(v=s["Mean"],lwd=1,lty=1,col="blue")
abline(v=s["Median"],lwd=1,lty=2,col="red")
hist(sumsPerDay$sumPerDay)
s<-summary(sumsPerDay$sumPerDay,digits=6)
s["Mean"]
s["Median"]
abline(v=s["Median"],lwd=1,lty=2,col="red")
abline(v=s["Mean"],lwd=1,lty=1,col="blue")
sumsPerInterval<-md[, list(sumPerInterval=sum(steps)), by=hour]
with(sumsPerInterval,(plot(hour,sumPerInterval)))
maxIntervalHours<-sumsPerInterval[sumsPerInterval$sumPerInterval==max(sumsPerInterval$sumPerInterval),]
abline(v=maxIntervalHours,lwd=1,lty=1,col="blue")
md <- read.csv("activity.csv")
md <-data.table(md)
table(md[is.na(md$steps),])
count(md[is.na(md$steps),])
rows(md[is.na(md$steps),])
nrow(md[is.na(md$steps),])
nrow(md[!is.na(md$steps),])
nrow(md[is.na(md$steps),])
sumsPerInterval[10]
sumsPerInterval2[10]
sumsPerInterval2[11]
sumsPerInterval2[,interval==50]
sumsPerInterval2[interval==50,]
sumsPerInterval2[interval==50,]$sumPerInterval
md$averagePerInterval<-md[,sumsPerInterval2[sumsPerInterval2$interval==md$interval,]$sumPerInterval]
head(md$averagePerInterval)
head(md)
head(md,n=50)
head(md,n=500)
md$averagePerInterval<-md[sumsPerInterval2[sumsPerInterval2$interval==md$interval,]$sumPerInterval,]
temp<-md[,sumsPerInterval2[sumsPerInterval2$interval==md$interval,]$sumPerInterval]
temp
md$averagePerInterval<-md[,sumsPerInterval2[,sumsPerInterval2$interval==md$interval]$sumPerInterval]
meansPerInterval<-md[, list(meanPerInterval=mean(steps)), by=hour]
with(meansPerInterval,(plot(hour,meanPerInterval)))
md$hour<-((as.integer((md$interval/100)) * 60) + (md$interval %% 100) ) /60
# sum up and plot the the step sums
meansPerInterval<-md[, list(meanPerInterval=mean(steps)), by=hour]
with(meansPerInterval,(plot(hour,meanPerInterval)))
unzip("activity.zip", exdir= ".")
md <- read.csv("activity.csv")
md <-data.table(md)
```
md<-md[!is.na(md$steps),]
md$hour<-((as.integer((md$interval/100)) * 60) + (md$interval %% 100) ) /60
# sum up and plot the the step sums
meansPerInterval<-md[, list(meanPerInterval=mean(steps)), by=hour]
with(meansPerInterval,(plot(hour,meanPerInterval)))
maxIntervalHours<-meansPerInterval[meansPerInterval$meanPerInterval==max(meansPerInterval$sumPerInterval),]
abline(v=maxIntervalHours,lwd=1,lty=1,col="blue")
maxIntervalHours<-meansPerInterval[meansPerInterval$meanPerInterval==max(meansPerInterval$meanPerInterval),]
abline(v=maxIntervalHours,lwd=1,lty=1,col="blue")
meansPerInterval2<-md[, list(meansPerInterval=sum(steps)), by=interval]
maxInterval<-meansPerInterval2[meansPerInterval2$meanPerInterval==max(meansPerInterval2$meanPerInterval),]
meansPerInterval2<-md[, list(meansPerInterval=mean(steps)), by=interval]
maxInterval<-meansPerInterval2[meansPerInterval2$meanPerInterval==max(meansPerInterval2$meanPerInterval),]
meansPerInterval2<-md[, list(meansPerInterval=mean(steps)), by=interval]
maxInterval<-meansPerInterval2[meansPerInterval2$meanPerInterval==max(meansPerInterval2$meanPerInterval),]
maxInterval<-meansPerInterval2[meansPerInterval2$meanPerInterval==max(meansPerInterval2$meanPerInterval),]
md <- read.csv("activity.csv")
md <-data.table(md)
md<-md[!is.na(md$steps),]
md$hour<-((as.integer((md$interval/100)) * 60) + (md$interval %% 100) ) /60
# sum up and plot the the step sums
meansPerInterval<-md[, list(meanPerInterval=mean(steps)), by=hour]
with(meansPerInterval,(plot(hour,meanPerInterval)))
maxIntervalHours<-meansPerInterval[meansPerInterval$meanPerInterval==max(meansPerInterval$meanPerInterval),]
abline(v=maxIntervalHours,lwd=1,lty=1,col="blue")
# To get the max interval, just sum up over interval, not hours
meansPerInterval2<-md[, list(meansPerInterval=mean(steps)), by=interval]
maxInterval<-meansPerInterval2[meansPerInterval2$meanPerInterval==max(meansPerInterval2$meanPerInterval),]
maxInterval$interval
meansPerInterval2
meansPerInterval2<-md[, list(meanPerInterval=mean(steps)), by=interval]
maxInterval<-meansPerInterval2[meansPerInterval2$meanPerInterval==max(meansPerInterval2$meanPerInterval),]
maxInterval$interval
md2<-merge(md, meansPerInterval, by=interval)
max(meansPerInterval2$
)
md2<-merge(md, meansPerInterval, by=interval)
md2<-merge(md, meansPerInterval, by="interval")
head(md)
head(meansPerInterval)
md2<-merge(md, meansPerInterval2, by="interval")
head(md2)
head(md2,n=500)
md<-merge(md, meansPerInterval2, by="interval")
md <- read.csv("activity.csv")
md <-data.table(md)
#calculate the number of NAs
nrow(md[is.na(md$steps),])
#replace the NAs with the average of steps per interval
#merge the means to make the assignement easiser
md<-merge(md, meansPerInterval2, by="interval")
head(md,n=50)
md$steps<-md[is.na(md$steps),meanPerInterval]
md$stesIsNA<-md[is.na(md$steps),]
md
md$stpesIsNA<-md[,is.na(md$steps)]
md
md <- read.csv("activity.csv")
md <-data.table(md)
#calculate the number of NAs
nrow(md[is.na(md$steps),])
#replace the NAs with the average of steps per interval
#merge the means to make the assignement easiser
md<-merge(md, meansPerInterval2, by="interval")
md$stpesIsNA<-md[,is.na(md$steps)]
md$steps<-md[is.na(md$steps),meanPerInterval]
md
md <- read.csv("activity.csv")
md <-data.table(md)
#calculate the number of NAs
nrow(md[is.na(md$steps),])
#replace the NAs with the average of steps per interval
#merge the means to make the assignement easiser
md<-merge(md, meansPerInterval2, by="interval")
md$stepsIsNA<-md[,is.na(md$steps)]
md
md[stepsIsNA==TRUE]
md[stepsIsNA==TRUE]$steps<-md[stepsIsNA==TRUE]$meanPerInterval
md[stepsIsNA==TRUE]$steps
md[stepsIsNA==TRUE,steps]
md[stepsIsNA==TRUE,steps]<-md[stepsIsNA==TRUE,meanPerInterval]
md[stepsIsNA==TRUE]$steps<-md[stepsIsNA==TRUE]$meanPerInterval
md <- read.csv("activity.csv")
nrow(md[is.na(md$steps),])
#replace the NAs with the average of steps per interval
#merge the means to make the assignement easiser
md<-merge(md, meansPerInterval2, by="interval")
md$stepsIsNA<-md[,is.na(md$steps)]
md <- read.csv("activity.csv")
md <-data.table(md)
#calculate the number of NAs
nrow(md[is.na(md$steps),])
#replace the NAs with the average of steps per interval
#merge the means to make the assignement easiser
md<-merge(md, meansPerInterval2, by="interval")
md$stepsIsNA<-md[,is.na(md$steps)]
library(dplyr)
md$interval<-as.string(md.interval)
md$interval<-toString(md.interval)
md$interval<-toString(md$interval)
md$interval<-md[,toString(md$interval)]
md$interval<-select(md,toString(interval))
md$interval2<-select(md,toString(interval))
md <- read.csv("activity.csv")
md <-data.table(md)
md$interval<-as.character[md$interval]
md$interval<-as.character(md$interval)
md
str(md)
library(lubridate)
md$interval<-fast_strptime(x,"H!M!")
md <- read.csv("activity.csv")
md <-data.table(md)
md$interval<-as.character(md$interval)
md$interval<-fast_strptime(x,"H!M!")
md$interval<-fast_strptime(md$interval,"H!M!")
md
md <- read.csv("activity.csv")
md <-data.table(md)
md
md$interval<-as.character(md$interval)
md
md <- read.csv("activity.csv")
md <-data.table(md)
md$interval<-as.character(md$interval, digits=4)
md
md$interval<-sprintf("%04d",md$interval)
md <- read.csv("activity.csv")
md <-data.table(md)
md$interval<-sprintf("%04d",md$interval)
md
md$interval<-fast_strptime(md$interval,"H!M!")
md
package(timeSeries)
library(timeSeries)
install.packages("timeSeries")
library(timeSeries)
with(meansPerInterval,(plot.ts(interval,meanPerInterval)))
meansPerInterval2<-md[, list(meanPerInterval=mean(steps)), by=interval]
maxInterval<-meansPerInterval2[meansPerInterval2$meanPerInterval==max(meansPerInterval2$meanPerInterval),]
library(timeSeries)
meanPerInterval
meansPerInterval
ts(meansPerInterval)
ts(meansPerInterval2)
meansPerInterval2<-md[, list(meanPerInterval=mean(steps)), by=interval]
ts(meansPerInterval2)
ts(meansPerInterval)
plot.ts(meansPerInterval)
plot.ts(meansPerInterval,type=1)
plot.ts(meansPerInterval,type="1")
plot.ts(meansPerInterval,type="1")
plot.ts(meansPerInterval,type=1)
plot.ts(meansPerInterval)
plot.ts(md)
plot.ts(meansPerInterval)
plot.ts(ts(meansPerInterval)
)
meansPerInterval2<-md[, list(meanPerInterval=mean(steps)), by=interval]
plot.ts(meansPerInterval2)
meanPerINterval2
meanPerInterval2
meansPerInterval2
meansPerInterval2<-md[, list(meanPerInterval=mean(steps)), by=interval]
meansPerInterval2
meansPerInterval2<-md[, list(meanPerInterval=mean(steps)), by=interval]
meansPerInterval2
md <- read.csv("activity.csv")
md <-data.table(md)
md<-md[!is.na(md$steps),]
meansPerInterval2<-md[, list(meanPerInterval=mean(steps)), by=interval]
meansPerInterval2
plot.ts(meansPerInterval2)
plot.ts(meansPerInterval2,type="1")
